let pokemonRepository=function(){let e=[],t='https://pokeapi.co/api/v2/pokemon/?limit=150';function n(t){let n=Object.keys(t);if('object'==typeof t)if('name'===n[0]&&'detailsUrl'===n[1])e.push(t);else{let e=JSON.stringify(t);alert(`${e} wrong format, the pokemon can not be added`)}else alert(`${t} is not a pokemon`)}function o(t){let n=e.indexOf(t),l=e[n+1],d=e[n-1];i(t).then(function(){!function(e,t,n,i,l,d){t='Height: '+t+' cm',n='Type: '+n,c.innerText='';let a=document.createElement('div');a.classList.add('modal'),c.appendChild(a);let r=document.createElement('button');r.classList.add('modal-close'),r.innerText='close',a.appendChild(r),r.addEventListener('click',function(){s()});let u=document.createElement('h1');u.innerText=e,u.classList.add('pokemon-title'),a.appendChild(u);let m=document.createElement('p');m.innerText=t,a.appendChild(m);let p=document.createElement('p');p.innerText=n,a.appendChild(p);let h=new Image;h.src=i,h.classList.add('image-pokemon'),a.appendChild(h);let f=document.createElement('div');if(f.classList.add('next-previous-container'),a.appendChild(f),void 0!==d){let e=document.createElement('button');e.classList.add('previous-button'),e.innerText='previous',f.appendChild(e),e.addEventListener('click',function(){s(),o(d)})}let L=document.createElement('div');if(f.appendChild(L),void 0!==l){let e=document.createElement('button');e.classList.add('next-button'),e.innerText='next',f.appendChild(e),e.addEventListener('click',function(){s(),o(l)})}c.addEventListener('click',e=>{let t=e.target;t===c&&s()}),c.classList.add('is-visible')}(t.name,t.height,t.types,t.image,l,d)})}function i(e){console.log(e),l();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){d(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.image=t.sprites.other.dream_world.front_default,e.types=[],t.types.forEach(function(t){e.types.push(t.type.name)})}).catch(function(e){d(),console.error(e)})}function l(){let e=document.querySelector('.loading-message'),t=document.createElement('h1');return t.innerText='Loading list...',e.appendChild(t)}function d(){let e=document.querySelector('.loading-message'),t=document.querySelector('h1');return e.removeChild(t)}let a,c=document.querySelector('#modal-container');function s(){c.classList.remove('is-visible'),a&&(a(),a=null)}return window.addEventListener('keydown',e=>{'Escape'===e.key&&c.classList.contains('is-visible')&&s()}),{add:n,getAll:function(){return e},addListItem:function(e){let t=document.querySelector('.pokemon-list'),n=document.createElement('li');t.appendChild(n),n.classList.add('pokemon-li');let i=document.createElement('button');i.innerText=`${e.name}`,n.appendChild(i),i.classList.add('pokemon-button'),i.addEventListener('click',function(){o(e)})},showDetails:o,loadList:function(){return l(),fetch(t).then(function(e){return e.json()}).then(function(e){d(),e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){d(),console.error(e)})},loadDetails:i,showLoadingMessage:l,hideLoadingMessage:d}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});