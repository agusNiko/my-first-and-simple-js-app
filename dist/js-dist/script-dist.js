const pokemonRepository=function(){const e=[],t='https://pokeapi.co/api/v2/pokemon/?limit=150';function n(t){let n=Object.keys(t);if('object'==typeof t)if('name'===n[0]&&'detailsUrl'===n[1])e.push(t);else{let e=JSON.stringify(t);alert(`${e} wrong format, the pokemon can not be added`)}else alert(`${t} is not a pokemon`)}function o(t){let n=e.indexOf(t),d=e[n+1],l=e[n-1];i(t).then(function(){!function(e,t,n,i,d,l){t='height: '+t,n='type: '+n,p.innerText='';let a=document.createElement('div');a.classList.add('modal'),p.appendChild(a);let c=document.createElement('button');c.classList.add('modal-close'),c.innerText='Close',a.appendChild(c),c.addEventListener('click',function(){h()});let s=document.createElement('h1');s.innerText=e,a.appendChild(s);let f=document.createElement('p');f.innerText=t,a.appendChild(f);let L=document.createElement('p');L.innerText=n,a.appendChild(L),a.appendChild(m),r();let g=new Image;g.src=i,g.classList.add('image-pokemon'),m.appendChild(g),g.addEventListener('load',function(){u()});let k=document.createElement('div');if(k.classList.add('next-previous-container'),a.appendChild(k),void 0!==l){let e=document.createElement('button');e.classList.add('previous-button'),e.innerText='previous',k.appendChild(e),e.addEventListener('click',function(){h(),o(l)})}let v=document.createElement('div');if(k.appendChild(v),void 0!==d){let e=document.createElement('button');e.classList.add('next-button'),e.innerText='next',k.appendChild(e),e.addEventListener('click',function(){h(),o(d)})}p.addEventListener('click',e=>{let t=e.target;t===p&&h()}),p.classList.add('is-visible')}(t.name,t.height,t.types,t.image,d,l)})}function i(e){console.log(e),d();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){l(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.image=t.sprites.other.dream_world.front_default,e.types=[],t.types.forEach(function(t){e.types.push(t.type.name)})}).catch(function(e){l(),console.error(e)})}function d(){let e=document.querySelector('.loading-message'),t=document.createElement('h1');return t.innerText='Loading list...',e.appendChild(a),a.appendChild(c),a.appendChild(s),e.appendChild(t)}function l(){let e=document.querySelector('.loading-message'),t=document.querySelector('h1'),n=document.querySelector('.pokeball');return e.removeChild(n),e.removeChild(t)}let a=document.createElement('div');a.classList.add('pokeball');let c=document.createElement('div');c.classList.add('pokeball-red');let s=document.createElement('div');function r(){m.innerText='',m.appendChild(a),a.appendChild(c),a.appendChild(s)}function u(){let e=document.querySelector('.image-container'),t=document.querySelector('.pokeball');return e.removeChild(t)}s.classList.add('pokeball-white');let p=document.querySelector('#modal-container'),m=document.createElement('div');function h(){p.classList.remove('is-visible')}return m.classList.add('image-container'),window.addEventListener('keydown',e=>{'Escape'===e.key&&p.classList.contains('is-visible')&&h()}),{add:n,getAll:function(){return e},addListItem:function(e){let t=document.querySelector('.pokemon-list'),n=document.createElement('li');t.appendChild(n),n.classList.add('pokemon-li');let i=document.createElement('button');i.innerText=`${e.name}`,n.appendChild(i),i.classList.add('pokemon-button'),i.addEventListener('click',function(){o(e)})},showDetails:o,loadList:function(){return d(),fetch(t).then(function(e){return e.json()}).then(function(e){l(),e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){l(),console.error(e)})},loadDetails:i,showLoadingMessage:d,hideLoadingMessage:l,showLoadingPokeball:r,hideLoadingPokeball:u}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});